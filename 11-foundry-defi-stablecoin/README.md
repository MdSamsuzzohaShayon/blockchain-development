# DeFi | Stablecoin
 - [(22:52:51) | Introduction to DeFi or Stablecoin](https://youtu.be/-1GB6m39-rM?t=82371)
 - [(23:05:10) | What is stablecoin?](https://youtu.be/-1GB6m39-rM?t=83110)
 - [(23:33:27) | Decentralized stablecoin](https://youtu.be/-1GB6m39-rM?t=84807)

 Till - https://youtu.be/-1GB6m39-rM?t=84393

#### Project
 1. (Relative stability) anchored or pegged -> $1 (make sure our coin is always worth $1). 
   a. Chainlink pri9ce feed, 
   b. Set a functin to exchange ETH & BTC -> $$$
 2. Stability Mechanism (Minting): Algorithmic (Decentralized)
   a. People can only mint the stablecoin with enough collateral (coded)
 3. Collateral: Exogenous (Crypto) -> We are going to use:
   a. wETH (ERC20) 
   b. wBTC (ERC20) for the collateral

#### DeFi, short for Decentralized Finance

DeFi, short for Decentralized Finance, refers to a broad category of financial services and applications built on blockchain technology, typically using smart contracts on networks like Ethereum. DeFi aims to recreate and improve traditional financial systems in a decentralized, permissionless, and transparent way.

 - Key aspects of DeFi include:
    - Decentralization: Unlike traditional finance, which relies on intermediaries like banks and brokers, DeFi protocols operate without central authorities, using smart contracts to automate transactions and ensure security.
    - Smart Contracts: These are self-executing contracts with the terms directly written into code. They allow for trustless interactions between parties, eliminating the need for intermediaries.
    - Financial Services: DeFi offers services similar to those found in traditional finance, such as lending, borrowing, trading, savings accounts, insurance, and even derivatives. Examples of DeFi platforms include Uniswap (decentralized exchange), Aave (lending), and Compound (yield farming).
    - Accessibility: DeFi is open to anyone with an internet connection, removing barriers like geographic restrictions and reducing the need for extensive documentation to access financial services.
    - Transparency: All transactions and smart contracts are recorded on the blockchain, making the entire system auditable and transparent to anyone.
 - By removing intermediaries, DeFi seeks to offer financial services that are cheaper, faster, and more accessible to a global audience. However, it also comes with risks, such as security vulnerabilities in smart contracts, market volatility, and regulatory uncertainty.

#### Stablecoin

A stablecoin is a type of cryptocurrency designed to maintain a stable value by being pegged to a reserve asset, such as a fiat currency (e.g., USD), precious metals (e.g., gold), or even a basket of assets. The primary goal of stablecoins is to reduce the price volatility typically associated with cryptocurrencies like Bitcoin or Ethereum, making them more useful for everyday transactions, savings, and trading within the cryptocurrency ecosystem.

 - **How Stablecoins Work?**
 - Stablecoins achieve price stability through one of the following mechanisms:
    1.  **Fiat-collateralized stablecoins:** 
        - These are backed by traditional fiat currencies like the US dollar or the Euro, held in reserve by a central entity (like a bank or a trust).
        - For every stablecoin issued, there’s an equivalent amount of fiat held in reserve.
        - Users can exchange stablecoins for the equivalent fiat currency at a 1:1 ratio.
        - Example: Tether (USDT) and USD Coin (USDC).
    2. Crypto-collateralized stablecoins:
        - These are backed by other cryptocurrencies rather than fiat. Because cryptocurrencies are volatile, these stablecoins are often over-collateralized—meaning more crypto is held as collateral than the value of the issued stablecoins.
        - Smart contracts are used to lock the collateral in the blockchain, and they automatically manage the collateralization ratio.
        - Example: Dai (DAI), which is backed by Ethereum and other crypto assets.
    3. Algorithmic stablecoins:
        - These are not backed by any physical assets or cryptocurrencies. Instead, they rely on algorithms and smart contracts to automatically adjust the supply of the stablecoin to maintain a stable price.
        - The protocol will increase or decrease the number of tokens in circulation based on the current price, similar to how central banks adjust the money supply.
        - Example: TerraUSD (UST), before its collapse, and FRAX.
 - **Examples of Popular Stablecoins**
    1. Tether (USDT): Backed by USD and is one of the oldest and most widely used stablecoins. Its value is pegged 1:1 to the US dollar.
    2. USD Coin (USDC): Issued by Circle and Coinbase, USDC is fully backed by USD reserves and frequently audited for transparency. Also pegged 1:1 to the US dollar.
    3. Dai (DAI): A decentralized stablecoin issued by the MakerDAO protocol. It is collateralized by crypto assets like Ethereum but maintains its peg to the US dollar using smart contracts.
    4. Binance USD (BUSD): A fiat-backed stablecoin issued by Binance, one of the world’s largest cryptocurrency exchanges, and regulated by US authorities. Pegged to the US dollar.
 - **Use Cases of Stablecoins**
    - Payments and Remittances: Stablecoins can be used for cross-border payments with lower fees and faster processing than traditional methods.
    - Hedging Against Volatility: Traders can convert volatile cryptocurrencies into stablecoins to avoid market fluctuations without needing to exit the crypto ecosystem.
    - DeFi Applications: Stablecoins are widely used in decentralized finance (DeFi) platforms for lending, borrowing, and liquidity provision, offering stability within these protocols.

While stablecoins offer stability and utility, they can still face risks such as regulatory scrutiny, smart contract vulnerabilities, and the stability of the underlying assets.

#### 3 Functions of money
 
The three functions of money refer to the essential roles that money plays in an economy. These functions are key to understanding how money works in facilitating transactions and economic activities. The three primary functions are:

 1. Storage of Value
    - Money serves as a means to store wealth or purchasing power over time. This allows individuals and businesses to save money today and spend it in the future, knowing that its value will be relatively stable.
    - Why it’s important: Without this function, people would have to consume all their goods and services immediately, as they would not retain their value over time (think of perishable goods like food).
    - Example: Holding money in a savings account allows people to defer consumption until a later date.
 2. Unit of Account
    - Money acts as a standard measure of value that allows individuals and businesses to set prices and compare the value of goods and services. It provides a common "language" for economic value, making it easier to make comparisons and transactions.
    - Why it’s important: Without a unit of account, there would be no standard way to compare the value of different goods or services, making trade and economic calculations difficult.
    - Example: When you see the price of a product (like a laptop for $1,000), that price reflects its value in terms of money, allowing you to compare it to the price of other goods.
 3. Medium of Exchange
    - Money functions as a commonly accepted means of exchange that facilitates the buying and selling of goods and services. Instead of bartering, where two parties must have what the other wants, money provides a convenient and efficient way to conduct transactions.
    - Why it’s important: This function reduces the inefficiencies of barter systems by providing a universally accepted form of payment, making trade easier and quicker.
    - Example: You use money to buy groceries, and the grocery store accepts it in exchange for the products you want.

These three functions ensure that money effectively facilitates economic activity by providing stability (storage of value), clarity (unit of account), and convenience (medium of exchange).

### Categories of Stablecoin
 1. Relative Stability (Pegged, Anchored, or Floating):
    - Pegged: These stablecoins are directly tied to a specific asset like a fiat currency (e.g., USD) or commodity (e.g., gold). The value remains fixed at a 1:1 ratio with the asset, minimizing volatility.
        - Example: Tether (USDT) and USD Coin (USDC), both pegged to the US dollar.
    - Anchored: These stablecoins are tied to a basket of assets or multiple currencies, providing broader diversification. The value remains stable, but not as rigid as a single-asset peg.
        - Example: Frax (FRAX), which uses a combination of collateral and algorithmic stabilization.
    - Floating: These stablecoins do not maintain a fixed value but aim for stability over time through demand-supply adjustments. Their value fluctuates but remains relatively stable in the long run.
        - Example: Ampleforth (AMPL), whose supply adjusts automatically based on market demand.
 2. Stability Method (Governed or Algorithmic):
    - Governed: These stablecoins are backed by reserves (like fiat or crypto), with central entities controlling the collateral. The stability is managed through traditional financial systems or audited reserves.
        - Example: USD Coin (USDC) is governed and backed by real USD reserves held by regulated entities.
    - Algorithmic: These stablecoins use algorithms and smart contracts to automatically adjust supply and demand. They do not rely on reserves but instead modify their circulating supply to maintain stability.
        - Example: TerraUSD (UST) (before collapse) and Frax (FRAX).
 3. Collateral Type (Endogenous or Exogenous):
    - Endogenous: Backed by native cryptocurrency assets within the system or protocol. These stablecoins use their own ecosystem’s assets (e.g., Ethereum) to provide collateralization.
        - Example: Dai (DAI) is backed by crypto assets like Ethereum.
    - Exogenous: Collateralized by external assets like fiat currencies, commodities (e.g., gold), or other tangible assets that exist outside the crypto system.
        - Example: Tether (USDT) is backed by USD and other external reserves.

#### How DAI/MakerDAO works?
DAI is a crypto-collateralized stablecoin issued by the decentralized protocol MakerDAO. It aims to maintain a stable value of $1 USD but is backed by crypto assets rather than fiat. The stability of DAI is managed through a system of smart contracts on the Ethereum blockchain.

**Here's how DAI and MakerDAO work, step by step:**

 1. Collateralized Debt Position (CDP)
    - Users who want to generate DAI need to lock up collateral (typically ETH or other supported assets) in a MakerDAO smart contract.
    - This creates a Collateralized Debt Position (CDP), which acts as a vault.
    - Example: A user deposits $2,000 worth of ETH as collateral.
 2. Generate DAI
    - After depositing collateral, users can borrow a certain amount of DAI (up to a fixed percentage) against their collateral. The collateralization ratio ensures that the system remains stable.
    - MakerDAO typically requires over-collateralization (e.g., 150% or higher) to account for potential market volatility.
    - Example: The user who deposited $2,000 worth of ETH can generate up to 1,000 DAI (with a 200% collateralization ratio).
 3. Maintaining DAI Stability
    - If the value of the collateral drops and the collateralization ratio falls below a certain threshold, the MakerDAO protocol will automatically liquidate the collateral to prevent the DAI from becoming undercollateralized.
    - This mechanism ensures that there is always more value backing DAI than the total supply, helping to maintain DAI’s peg to $1 USD.
 4. Repaying the Debt
    - To close the CDP and retrieve the locked collateral, the user must repay the borrowed DAI plus a stability fee (which functions as interest on the loan).
    - Example: If the user borrowed 1,000 DAI, they must repay that amount plus a small fee (in DAI) to reclaim their ETH.
 5. Liquidation
    - If the value of the collateral decreases too much (e.g., due to a market crash), and the collateralization ratio falls below a required level (e.g., 150%), the system automatically liquidates the collateral.
    - Liquidators buy the collateral, ensuring that the DAI in circulation remains fully backed by assets.
 6. MKR Token
    - The MakerDAO ecosystem has a governance token called MKR. Holders of MKR can vote on protocol decisions such as changing collateralization ratios, adding new types of collateral, and adjusting the stability fee.
    - MKR is also used to pay off bad debt when the system cannot liquidate enough collateral to cover the issued DAI.

**Example of a DAI Transaction:**

 - Alice locks $3,000 of ETH in MakerDAO.
 - She generates 1,500 DAI, keeping a 200% collateralization ratio.
 - After a month, Alice decides to repay her loan. She sends 1,500 DAI + stability fee back to the system.
 - She retrieves her $3,000 worth of ETH from the vault.
 - If ETH’s price drops significantly and the collateralization ratio falls below the safe level, the system will liquidate part of her ETH to ensure the 1,500 DAI remains fully backed.

**Key Features of DAI:**

 - Decentralized: DAI is created through a decentralized system, meaning no central authority controls it.
 - Over-collateralized: DAI is backed by assets worth more than the DAI in circulation to prevent undercollateralization.
 - Governed by MKR holders: Users holding MKR vote on important protocol decisions.

This system helps DAI maintain a stable value even in volatile markets, making it a popular choice for decentralized finance (DeFi) applications.

#### Essential resources
 - https://defillama.com/
 - https://app.aave.com/
 - https://defillama.com/protocol/aave#information
 - https://app.uniswap.org/
 - https://explore.flashbots.net/

____
## Foundry

**Foundry is a blazing fast, portable and modular toolkit for Ethereum application development written in Rust.**

Foundry consists of:

-   **Forge**: Ethereum testing framework (like Truffle, Hardhat and DappTools).
-   **Cast**: Swiss army knife for interacting with EVM smart contracts, sending transactions and getting chain data.
-   **Anvil**: Local Ethereum node, akin to Ganache, Hardhat Network.
-   **Chisel**: Fast, utilitarian, and verbose solidity REPL.

## Documentation

https://book.getfoundry.sh/

## Usage

### Build

```shell
$ forge build
```

### Test

```shell
$ forge test
```

### Format

```shell
$ forge fmt
```

### Gas Snapshots

```shell
$ forge snapshot
```

### Anvil

```shell
$ anvil
```

### Deploy

```shell
$ forge script script/Counter.s.sol:CounterScript --rpc-url <your_rpc_url> --private-key <your_private_key>
```

### Cast

```shell
$ cast <subcommand>
```

### Help

```shell
$ forge --help
$ anvil --help
$ cast --help
```
